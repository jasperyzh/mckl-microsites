<template>
  <!-- Note :
- You can modify the font style and form style to suit your website. 
- Code lines with comments Do not remove this code are required for the form to work properly, make sure that you do not remove these lines of code. 
- The Mandatory check script can modified as to suit your business needs. 
- It is important that you test the modified form before going live.-->
  <div id="crmWebToEntityForm" class="container-box zcwf_lblLeft crmWebToEntityForm">
    <h2 class="h4">Complete the form to begin your Scholarship Application process</h2>
    <!-- <h2>Complete the form &amp; secure your spot today!</h2> -->
    <form id="form__top" action="https://crm.zoho.com/crm/WebToLeadForm" name="WebToLeads4875945000001345005"
      method="POST" onSubmit='javascript:document.charset="UTF-8"; return checkMandatory4875945000001345005()'
      accept-charset="UTF-8">
      <input type="text" style="display: none" name="xnQsjsdp"
        value="4d9f4e6fae5a20e0cd8c2a36a070b76984439065bac62cc4cea2c71c2a1d58fb" />
      <input type="hidden" name="zc_gad" id="zc_gad" value="" />
      <input type="text" style="display: none" name="xmIwtLD"
        value="3df8513a44e8ee0dc6e36209ffd3db24bfd1904603c6563b9abfdd5fe958c691" />
      <input type="text" style="display: none" name="actionType" value="TGVhZHM=" />
      <input type="text" style="display: none" name="returnURL" value="https://mckl.edu.my/scholarship/thank-you" />

      <!-- Do not remove this code. -->
      <!-- <div class='zcwf_title' style='max-width: 600px;color: black;'>mckl-scholarship
</div> -->
      <div class="zcwf_row form-group">
        <!-- <div class='zcwf_col_lab'><label for='Last_Name'>Full Name<span
style='color:red;'>*</span></label></div> -->
        <div class="zcwf_col_fld">
          <input type="text" class="form-control info" id="Last_Name" name="Last Name" maxlength="80"
            placeholder="Full Name*" />
          <div class="zcwf_col_help"></div>
        </div>
      </div>
      <div class="zcwf_row form-group">
        <!-- <div class='zcwf_col_lab'><label for='Email'>Email<span
style='color:red;'>*</span></label></div> -->
        <div class="zcwf_col_fld">
          <input type="text" class="form-control info" ftype="email" id="Email" name="Email" maxlength="100"
            placeholder="Email*" />
          <div class="zcwf_col_help"></div>
        </div>
      </div>
      <div class="zcwf_row form-group">
        <!-- <div class='zcwf_col_lab'><label for='Mobile'>Mobile<span
style='color:red;'>*</span></label></div> -->
        <div class="zcwf_col_fld">
          <input type="text" class="form-control info" id="Mobile" name="Mobile" maxlength="30" placeholder="Mobile*" />
          <div class="zcwf_col_help"></div>
        </div>
      </div>

      <!-- programme_interest -->
      <div class="form-group">
        <select class="form-select" name="programme_interested" id="programme_interested" required="">
          <option disabled selected value="">Interested Programme*</option>
          <optgroup label="Pre-University">
            <option value="Cambridge A Level">Cambridge A Level</option>
            <option value="AUSMAT">Australian Matriculation</option>
          </optgroup>
          <optgroup label="Undergraduate Programme">
            <option value="ADTP">American Degree Transfer Program</option>
            <option value="DECE (FT)">
              Diploma in Early Childhood Education
            </option>
            <option value="DSW (FT)">Diploma in Social Work</option>
            <option value="DCS">Diploma in Computer Science</option>
            <option value="DIT">Diploma in Information Technology</option>
            <option value="DEC">Diploma in Digital Business</option>
            <option value="DDM">Diploma in Digital Marketing</option>
            <option value="DIFT">Diploma in Financial Technology</option>
          </optgroup>
          <optgroup label="Professional Accounting">
            <option value="ACCA FIA">
              ACCA Foundation in Accountancy (ACCA FIA)
            </option>
            <option value="ACCA (PT)">
              Association of Chartered Certified Accountants (ACCA)
            </option>
          </optgroup>
        </select>
      </div>

      <!-- qualification -->
      <div class="form-group">
        <select class="form-select qualification" id="qualification" required>
          <option disabled selected value="">
            Highest Level of Education*
          </option>
          <option value="spm">SPM</option>
          <option value="igcse">IGCSE</option>
          <option value="pre-university">Pre-University</option>
          <option value="diploma">Diploma</option>
          <option value="other">Other Qualifications</option>
        </select>
      </div>

      <!-- hidden fields -->
      <div class="zcwf_row d-none">
        <div class="zcwf_col_lab" style="font-size: 12px; font-family: Arial">
          <label for="LEADCF5">Latest Academic Qualification</label>
        </div>
        <div class="zcwf_col_fld">
          <input type="text" id="LEADCF5" name="LEADCF5" maxlength="255" value="null" />
          <div class="zcwf_col_help"></div>
        </div>
      </div>
      <div class="zcwf_row d-none">
        <div class="zcwf_col_lab" style="font-size: 12px; font-family: Arial">
          <label for="LEADCF20">Pre-University</label>
        </div>
        <div class="zcwf_col_fld">
          <select class="form-select zcwf_col_fld_slt" id="LEADCF20" name="LEADCF20">
            <option value="-None-">-None-</option>
            <option selected value="Cambridge&#x20;A&#x20;Level">
              Cambridge A Level
            </option>
            <option value="Cambridge&#x20;A&#x20;Level&#x20;&#x28;German&#x20;Pathway&#x29;">
              Cambridge A Level &#x28;German Pathway&#x29;
            </option>
            <option value="AUSMAT">AUSMAT</option>
          </select>
          <div class="zcwf_col_help"></div>
        </div>
      </div>
      <div class="zcwf_row d-none">
        <div class="zcwf_col_lab" style="font-size: 12px; font-family: Arial">
          <label for="LEADCF19">Diploma/Degree</label>
        </div>
        <div class="zcwf_col_fld">
          <select class="form-select zcwf_col_fld_slt" id="LEADCF19" name="LEADCF19">
            <option value="-None-">-None-</option>
            <option selected value="ADTP">ADTP</option>
            <option value="DECE&#x20;&#x28;PT&#x29;">
              DECE &#x28;PT&#x29;
            </option>
            <option value="DECE&#x20;&#x28;FT&#x29;">
              DECE &#x28;FT&#x29;
            </option>
            <option value="DSW&#x20;&#x28;PT&#x29;">DSW &#x28;PT&#x29;</option>
            <option value="DSW&#x20;&#x28;FT&#x29;">DSW &#x28;FT&#x29;</option>
            <option value="DIT">DIT</option>
            <option value="DCS">DCS</option>
            <option value="DEC">DEC</option>
            <option value="DDM">DDM</option>
          </select>
          <div class="zcwf_col_help"></div>
        </div>
      </div>
      <div class="zcwf_row d-none">
        <div class="zcwf_col_lab" style="font-size: 12px; font-family: Arial">
          <label for="LEADCF21">Professional Accounting Programme</label>
        </div>
        <div class="zcwf_col_fld">
          <select class="zcwf_col_fld_slt" id="LEADCF21" name="LEADCF21">
            <option value="-None-">-None-</option>
            <option selected value="ACCA&#x20;&#x28;FT&#x29;">
              ACCA &#x28;FT&#x29;
            </option>
            <option value="ACCA&#x20;&#x28;PT&#x29;">
              ACCA &#x28;PT&#x29;
            </option>
            <option value="ACCA&#x20;FIA">ACCA FIA</option>
          </select>
          <div class="zcwf_col_help"></div>
        </div>
      </div>
      <div class="zcwf_row">
        <!-- <div class='zcwf_privacy'>
<div class='dIB vat' align='left'>
<div class='displayPurpose  f13'><label
class='newCustomchkbox-md dIB w100per'><input autocomplete='off'
id='privacyTool4875945000001345005' type='checkbox'
name='privacyTool'
onclick='disableErr4875945000001345005()'></label></div>
</div>
<div class='dIB zcwf_privacy_txt'>I have read
the College's <a
href='https://mckl.edu.my/personal-data-protection-notice/' title=''
target='_blank' data_issistrackenabled='false'
data_siqtrackparam='null'>Personal Data
Protection Notice</a> and I give consent to the College to process
my personal data accordingly.
</div>
<div id='privacyErr4875945000001345005'
style='font-size:12px;color:red;padding-left: 5px;visibility:hidden;'>
Please accept this</div>
</div> -->
        <div class="zcwf_privacy">
          <div class="dIB vat form-group form-check">
            <div class="displayPurpose f13">
              <input class="form-check-input" autocomplete="off" id="privacyTool4875945000001345005" type="checkbox"
                name="privacyTool" onclick="disableErr4875945000001345005()" required="required" />
              <label for="privacyTool4875945000001345005" class="form-check-label">
                <div class="dIB zcwf_privacy_txt">
                  I have read the College's
                  <a href="https://mckl.edu.my/legal-policies-and-notices/" title="" target="_blank"
                    data_issistrackenabled="false" data_siqtrackparam="null"
                    style="color: #033676; text-decoration: underline">Personal Data Protection Notice</a>
                  and I give consent to the College to process my personal data
                  accordingly.
                </div>

              </label>
            </div>
          </div>
        </div>
      </div>
      <div class="zcwf_row">
        <div class="zcwf_col_lab"></div>
        <!-- <div class='zcwf_col_fld'><input type='submit' id='formsubmit'
class='formsubmit zcwf_button' value='Submit' title='Submit'> -->
        <input type="submit" id="formsubmit_top" class="mr-2 btn btn-primary formsubmit zcwf_button" value="Submit"
          title="Submit" onclick="phonenumber(document.WebToLeads4875945000001345005.Mobile)" />
        <!-- <input
type='reset' class='zcwf_button' name='reset' value='Reset'
title='Reset'> -->
      </div>
    </form>
  </div>
</template>

<script>
export default {
  mounted() {
    //validation phone number
    //        function phonenumber(inputtxt)
    //        {
    //            var phoneno = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
    //            if((inputtxt.value.match(phoneno))
    //               {
    //               return true;
    //               }
    //               else
    //               {
    //               alert("message");
    //            return false;
    //        }
    //        }

    function privacyAlert4875945000001345005() {
      var privacyTool = document.getElementById(
        "privacyTool4875945000001345005"
      );
      var privacyErr = document.getElementById("privacyErr4875945000001345005");
      if (privacyTool != undefined && !privacyTool.checked) {
        privacyErr.style.visibility = "visible";
        privacyTool.focus();
        return false;
      }
      return true;
    }
    function disableErr4875945000001345005() {
      var privacyTool = document.getElementById(
        "privacyTool4875945000001345005"
      );
      var privacyErr = document.getElementById("privacyErr4875945000001345005");
      if (
        privacyTool != undefined &&
        privacyTool.checked &&
        privacyErr != undefined
      ) {
        privacyErr.style.visibility = "hidden";
      }
    }
    function validateEmail4875945000001345005() {
      var form = document.forms["WebToLeads4875945000001345005"];
      var emailFld = form.querySelectorAll("[ftype=email]");
      var i;
      for (i = 0; i < emailFld.length; i++) {
        var emailVal = emailFld[i].value;
        if (emailVal.replace(/^\s+|\s+$/g, "").length != 0) {
          var atpos = emailVal.indexOf("@");
          var dotpos = emailVal.lastIndexOf(".");
          if (
            atpos < 1 ||
            dotpos < atpos + 2 ||
            dotpos + 2 >= emailVal.length
          ) {
            alert("Please enter a valid email address. ");
            emailFld[i].focus();
            return false;
          }
        }
      }
      return true;
    }

    function checkMandatory4875945000001345005() {
      var mndFileds = new Array("Last Name", "Email", "Mobile");
      var fldLangVal = new Array("Full\x20Name", "Email", "Mobile");
      for (i = 0; i < mndFileds.length; i++) {
        var fieldObj =
          document.forms["WebToLeads4875945000001345005"][mndFileds[i]];
        if (fieldObj) {
          if (fieldObj.value.replace(/^\s+|\s+$/g, "").length == 0) {
            if (fieldObj.type == "file") {
              alert("Please select a file to upload.");
              fieldObj.focus();
              return false;
            }
            alert(fldLangVal[i] + " cannot be empty.");
            fieldObj.focus();
            return false;
          } else if (fieldObj.nodeName == "SELECT") {
            if (fieldObj.options[fieldObj.selectedIndex].value == "-None-") {
              alert(fldLangVal[i] + " cannot be none.");
              fieldObj.focus();
              return false;
            }
          } else if (fieldObj.type == "checkbox") {
            if (fieldObj.checked == false) {
              alert("Please accept  " + fldLangVal[i]);
              fieldObj.focus();
              return false;
            }
          }
          try {
            if (fieldObj.name == "Last Name") {
              name = fieldObj.value;
            }
          } catch (e) { }
        }
      }
      if (!validateEmail4875945000001345005()) {
        return false;
      }

      if (!privacyAlert4875945000001345005()) {
        return false;
      }
      document
        .querySelector(".crmWebToEntityForm .formsubmit")
        .setAttribute("disabled", true);
    }

    function tooltipShow4875945000001345005(el) {
      var tooltip = el.nextElementSibling;
      var tooltipDisplay = tooltip.style.display;
      if (tooltipDisplay == "none") {
        var allTooltip = document.getElementsByClassName("zcwf_tooltip_over");
        for (i = 0; i < allTooltip.length; i++) {
          allTooltip[i].style.display = "none";
        }
        tooltip.style.display = "block";
      } else {
        tooltip.style.display = "none";
      }
    }
    // submit form
    document.getElementById("form__top").addEventListener("submit", () => {
      clearZohoField();
      refillZohoField();
      return;
    });

    // function to get SELECT's value
    // https://stackoverflow.com/questions/5866169/how-to-get-all-selected-values-of-a-multiple-select-box
    function getSelectValues(select) {
      var result = [];
      var options = select && select.options;
      var opt;
      for (var i = 0, iLen = options.length; i < iLen; i++) {
        opt = options[i];
        if (opt.selected) {
          result.push(opt.value || opt.text);
        }
      }
      return result;
    }

    function clearZohoField() {
      document.getElementById("LEADCF5").value = "";

      let array_field = ["LEADCF20", "LEADCF19", "LEADCF21"];
      array_field.forEach((item) => {
        let getItem = document.getElementById(item);
        getItem.options[getItem.options.selectedIndex].selected = "";
      });
    }

    function getUserSelectedProgramme() {
      let get_user_selected_programme = document.getElementById(
        "programme_interested"
      ).value;
      return get_user_selected_programme;
    }

    function refillZohoField() {
      /* refill qualification onto zoho-field */
      document.getElementById("LEADCF5").value =
        document.getElementById("qualification").value;

      /* refill programme_interested onto zoho-field */

      // get all the options to be selected
      let get_options = document.querySelectorAll(
        `#LEADCF20 option, #LEADCF19 option, #LEADCF21 option`
      );
      console.log("get_options", get_options);

      // get user selected programmes
      // let get_user_selected_programme = getSelectValues(document.getElementById('programme_interested'))
      let get_user_selected_programme = document.getElementById(
        "programme_interested"
      ).value;
      console.log("get_user_selected_programme", get_user_selected_programme);

      // cross-check user-selected with zoho-options; select option

      get_options.forEach((option) => {
        console.log(getUserSelectedProgramme());

        if (option.value == getUserSelectedProgramme()) {
          option.selected = true;
          return;
        }
      });
      /* get_user_selected_programme.forEach(item => {
                    get_options.forEach(option => {
                        if (option.value == item) {
                            option.selected = true;
                            return;
                        }
                    })
                }) */
      return;
    }

    /* document.getElementById('test').addEventListener('click', () => {
        clearZohoField();
        refillZohoField();
        // return;
    }) */
  },
};
</script>

<style lang="scss" scoped>
.form-group {
  margin-bottom: .75rem;
}

.zcwf_privacy {
  font-size: .825rem;
}
</style>